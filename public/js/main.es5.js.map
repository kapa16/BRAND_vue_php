{"version":3,"sources":["main.js"],"names":["_this5","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","$","document","ready","$logoMenu","fadeOut","mouseleave","mousemove","fadeIn","$logoSubMenu","mouseenter","evt","siblings","$browseMenu","Cart","source","container","arguments","undefined","this","countGoods","amount","cartItems","_init","value","_this","_render","_addEventHandlers","fetch","then","result","json","data","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","contents","Symbol","iterator","next","done","product","push","_renderItem","err","return","_renderSum","$cartItemsDiv","class","$totalPrice","append","$cartButtons","$checkoutButton","href","text","$cartButton","appendTo","$cartMenu","delay","stop","className","id","data-product","src","img_src","alt","img_alt","$productRating","concat","_renderItemMenuCart","_renderItemPageCart","_this2","$container","_getMainItemContainer","id_product","$img","_getImageElement","addClass","$productInfo","_getDivElement","_getParagraphElement","product_name","_getProductRatingElement","_getSpanElement","quantity","price","click","_onChangeQuantity","_this3","$productDetails","$productDescription","color","size","val","change","shipping","find","preventDefault","$productContainer","closest","$inputQuantity","addQuantity","productId","_getCartItem","_changeQuantity","_showMessage","msg","element","_getItemWrapper","deleteItem","_getEventProductId","$inputEl","cartItem","_remove","_updateCart","splice","indexOf","remove","Accordion","containerClass","_this4","_toggleMenu","removeClass","$currentTitle","$currentElOpen","not","slideUp","slideToggle","is","window","scroll","scrollTop","height","cart","addProduct","clearCart","on"],"mappings":"AAAA,aAEA,IAAIA,YAAS,EAEb,SAASC,gBAAgBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAEhH,SAASC,kBAAkBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAE7S,SAASO,aAAad,EAAae,EAAYC,GAAmJ,OAAhID,GAAYb,kBAAkBF,EAAYiB,UAAWF,GAAiBC,GAAad,kBAAkBF,EAAagB,GAAqBhB,EALzMkB,EAAEC,UAAUC,MAAM,WAEhB,IAAMC,EAAYH,EAAE,mBACpBG,EACGC,UACAC,WAAW,WAAA,OAAMF,EAAUC,YAC9BJ,EAAE,WACCM,UAAU,WAAA,OAAMH,EAAUI,WAG7B,IAAMC,EAAeR,EAAE,iCACvBQ,EACGJ,UACAC,WAAW,WAAA,OAAMG,EAAaJ,YAEjCJ,EAAE,mBACCS,WAAW,SAAAC,GACVV,EAAEU,EAAIzB,QACH0B,SAAS,iBAAiBJ,SAC1BF,WAAW,WAAA,OAAMG,EAAaJ,cAElCC,WAAW,WAAA,OAAMG,EAAaJ,YAGjC,IAAMQ,EAAcZ,EAAE,yBACtBY,EACGR,UACAC,WAAW,WACVO,EAAYR,YAEhBJ,EAAE,WACCM,UAAU,WAAA,OAAMM,EAAYL,WAC5BF,WAAW,WAAA,OAAMO,EAAYR,cAUlC,IARMS,KAUN,WAJE,SAAAA,EAAYC,GAAwC,IAAhCC,EAAgCC,UAAA5B,OAAA,QAAA6B,IAAAD,UAAA,GAAAA,UAAA,GAApB,mBAAoBpC,gBAAAsC,KAAAL,GAClDK,KAAKJ,OAASA,EACdI,KAAKH,UAAYA,EACjBG,KAAKC,WAAa,EAClBD,KAAKE,OAAS,EACdF,KAAKG,UAAY,GACjBH,KAAKI,QA2ZP,OAlYA1B,aAAaiB,EAAM,CAAC,CAClBlB,IAAK,QACL4B,MAAO,WApBD,IAAAC,EAAAN,KACNA,KAAKO,UACLP,KAAKQ,oBACLC,MAAMT,KAAKJ,QACRc,KAAK,SAAAC,GAAM,OAAIA,EAAOC,SACtBF,KAAK,SAAAG,GAAQ,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAjB,EAAA,IACZ,IAAA,IAAAkB,EAAAC,EAAoBL,EAAKM,SAAzBC,OAAAC,cAAAP,GAAAG,EAAAC,EAAAI,QAAAC,MAAAT,GAAA,EAAmC,CAAA,IAA1BU,EAA0BP,EAAAZ,MACjCC,EAAKH,UAAUsB,KAAKD,GACpBlB,EAAKoB,YAAYF,IAHP,MAAAG,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,QAAA,IAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,QAAA,GAAAb,EAAA,MAAAC,GAKZV,EAAKL,WAAaY,EAAKZ,WACvBK,EAAKJ,OAASW,EAAKX,OACnBI,EAAKuB,iBAwDR,CACDpD,IAAK,UACL4B,MAAO,WAjDP,IAAIyB,EAAgBhD,EAAE,SAAU,CAC9BiD,MAAO,sBAELC,EAAclD,EAAE,SAAU,CAC5BiD,MAAO,eAETC,EAAYC,OAAO,gBACnBD,EAAYC,OAAO,uCAEnB,IAAMC,EAAepD,EAAE,SAAU,CAC/BiD,MAAO,uBAEHI,EAAkBrD,EAAE,OAAQ,CAChCsD,KAAM,gBACNL,MAAO,oBACPM,KAAM,aAEFC,EAAcxD,EAAE,OAAQ,CAC5BsD,KAAM,qBACNL,MAAO,oBACPM,KAAM,eAERH,EACGD,OAAOE,GACPF,OAAOK,GAEVR,EACGG,OAAO,uCACPA,OAAOD,GACPC,OAAOC,GACPK,SAASzD,EAAEkB,KAAKH,cAiDlB,CACDpB,IAAK,oBACL4B,MAAO,WA3CP,IAAMmC,EAAY1D,EAAE,eACpBA,EAAEkB,KAAKH,WACJT,UAAU,WAAA,OAAMoD,EAAUnD,WAC1BF,WAAW,WAAA,OAAMqD,EAAUC,MAAM,KAAKvD,YAEzCsD,EACGpD,UAAU,WAAA,OAAMoD,EAAUE,SAC1BvD,WAAW,WACVqD,EAAUtD,cAwDb,CACDT,IAAK,wBACL4B,MAAO,SA/CasC,EAAWC,GAC/B,OAAO9D,EAAE,SAAU,CACjBiD,MAAOY,EACPE,eAAgBD,MAyDjB,CACDnE,IAAK,mBACL4B,MAAO,SAjDQmB,GACf,OAAO1C,EAAE,SAAU,CACjBgE,IAAKtB,EAAQuB,QACbC,IAAKxB,EAAQyB,YA0Dd,CACDxE,IAAK,2BACL4B,MAAO,WAjDP,IADA,IAAM6C,EAAiBpE,EAAE,sCAChBb,EAAI,EAAGA,EAAI,EAAGA,IACrBiF,EAAejB,OAAO,2CAExB,OAAOiB,IA+DN,CACDzE,IAAK,iBACL4B,MAAO,SAvDMsC,GAAsB,IAAXN,EAAWvC,UAAA5B,OAAA,QAAA6B,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAC/B,OAAOhB,EAAC,eAAAqE,OAAgBR,EAAhB,MAAAQ,OAA8Bd,EAA9B,aAkEP,CACD5D,IAAK,uBACL4B,MAAO,SA1DYsC,EAAWN,GAC9B,OAAOvD,EAAC,aAAAqE,OAAcR,EAAd,MAAAQ,OAA4Bd,EAA5B,WA4DP,CACD5D,IAAK,kBACL4B,MAAO,SA3DOsC,EAAWN,GACzB,OAAOvD,EAAC,gBAAAqE,OAAiBR,EAAjB,MAAAQ,OAA+Bd,EAA/B,cA6DP,CACD5D,IAAK,cACL4B,MAAO,SA5DGmB,GACVxB,KAAKoD,oBAAoB5B,GACzBxB,KAAKqD,oBAAoB7B,KAqExB,CACD/C,IAAK,sBACL4B,MAAO,SA/DWmB,GAAS,IAAA8B,EAAAtD,KACrBuD,EAAavD,KAAKwD,sBAAsB,+BAAgChC,EAAQiC,YAEhFC,EAAO1D,KAAK2D,iBAAiBnC,GACnCkC,EAAKE,SAAS,iBAEd,IAAMC,EAAe7D,KAAK8D,eAAe,gBACzCD,EACG5B,OAAOjC,KAAK+D,qBAAqB,6BAA8BvC,EAAQwC,eACvE/B,OAAOjC,KAAKiE,2BAA2BL,SAAS,kBAChD3B,OAAOjC,KAAK8D,eAAe,uBACzB7B,OAAOjC,KAAKkE,gBAAgB,mBAAoB1C,EAAQ2C,WACxDlC,OAFK,oBAGLA,OAAOjC,KAAKkE,gBAAgB,gBAArB,QAAAf,OAA8C3B,EAAQ4C,UAElEb,EACGtB,OAAOyB,GACPzB,OAAO4B,GACP5B,OAAOjC,KAAK8D,eAAe,sCACzBO,MAAM,SAAA7E,GAAG,OAAI8D,EAAKgB,kBAAkB9E,EAAIzB,QAAQ,MAClDwE,SAASzD,EAAE,uBAiEb,CACDL,IAAK,sBACL4B,MAAO,SA3DWmB,GAAS,IAAA+C,EAAAvE,KACrBuD,EAAavD,KAAKwD,sBAAsB,mCAAoChC,EAAQiC,YAEpFe,EAAkBxE,KAAK8D,eAAe,mCACtCJ,EAAO1D,KAAK2D,iBAAiBnC,GAE7BiD,EAAsBzE,KAAK8D,eAAe,+BAChDW,EACGxC,OAAOjC,KAAK+D,qBAAqB,eAAgBvC,EAAQwC,eACzD/B,OAAOjC,KAAKiE,4BACZhC,OAAOjC,KAAK+D,qBAAqB,6BAA8B,WAC7D9B,OAAOjC,KAAKkE,gBAAgB,wBAAyB1C,EAAQkD,SAC/DzC,OAAOjC,KAAK+D,qBAAqB,6BAA8B,UAC7D9B,OAAOjC,KAAKkE,gBAAgB,wBAAyB1C,EAAQmD,QAElEH,EACGvC,OAAOyB,GACPzB,OAAOwC,GAEVlB,EACGtB,OAAOuC,GACPvC,OAAOjC,KAAK8D,eAAe,kBAApB,QAAAX,OAA+C3B,EAAQ4C,SAC9DnC,OAAOjC,KAAK8D,eAAe,mBACzB7B,OAAOnD,EAAE,+EACP8F,IAAIpD,EAAQ2C,UACZU,OAAO,SAAArF,GAAG,OAAI+E,EAAKD,kBAAkB9E,EAAIzB,YAC7CkE,OAAOjC,KAAK8D,eAAe,kBAAmBtC,EAAQsD,WACtD7C,OAAOjC,KAAK8D,eAAe,iCAApB,QAAAX,OAA8D3B,EAAQ2C,SAAW3C,EAAQ4C,SAChGnC,OAAOjC,KAAK8D,eAAe,mBACzB7B,OAAOjC,KAAK8D,eAAe,6DAC3BO,MAAM,SAAA7E,GAAG,OAAI+E,EAAKD,kBAAkB9E,EAAIzB,QAAQ,MAClDwE,SAASzD,EAAE,kBAoDb,CACDL,IAAK,aACL4B,MAAO,WA9CPvB,EAAE,mBAAmBuD,KAAKrC,KAAKC,YAC/BnB,EAAE,mBAAmBuD,KAArB,IAAAc,OAA8BnD,KAAKE,WAuDlC,CACDzB,IAAK,cACL4B,MAAO,SAjDGmB,GACV,IAAI+B,EAAazE,EAAC,qBAAAqE,OAAsB3B,EAAQiC,WAA9B,OAClBF,EAAWwB,KAAK,qBAAqB1C,KAAKb,EAAQ2C,UAClDZ,EAAWwB,KAAK,kBAAkB1C,KAAlC,IAAAc,OAA2C3B,EAAQ2C,SAAW3C,EAAQ4C,UAmDrE,CACD3F,IAAK,eACL4B,MAAO,SAlDIuC,GACX,OAAO5C,KAAKG,UAAU4E,KAAK,SAAAvD,GAAO,OAAIA,EAAQiC,aAAeb,MA2D5D,CACDnE,IAAK,aACL4B,MAAO,SAtDEb,GACTA,EAAIwF,iBACJ,IAAMC,EAAoBnG,EAAEU,EAAIzB,QAAQmH,QAAQ,aAC1CxB,EAAOuB,EAAkBF,KAAK,OAAO,GACrCI,EAAiBF,EAAkBF,KAAK,aAAa,GACvDK,EAAc,EACdD,IACFC,GAAeD,EAAe9E,MAC9B8E,EAAe9E,MAAQ,GAEzB,IAAIgF,GAAaJ,EAAkBpE,KAAK,MACpCkE,EAAO/E,KAAKsF,aAAaD,GAC7B,GAAIN,EACF/E,KAAKuF,gBAAgBR,EAAMA,EAAKZ,SAAWiB,GAC3CpF,KAAKwF,aAAL,qBAAArC,OAAuC4B,EAAKf,aAA5C,mBACK,CACL,IAAIxC,EAAU,CACZiC,WAAY4B,EACZrB,aAAciB,EAAkBpE,KAAK,QACrCuD,MAAOa,EAAkBpE,KAAK,SAC9BsD,SAAUiB,EACVrC,QAASW,EAAKZ,IACdG,QAASS,EAAKV,IACd0B,MAAOO,EAAkBpE,KAAK,SAC9B8D,KAAMM,EAAkBpE,KAAK,SAE/Bb,KAAKG,UAAUsB,KAAKD,GACpBxB,KAAK0B,YAAYF,GACjBxB,KAAKE,QAAUsB,EAAQ4C,MACvBpE,KAAKC,YAAcuB,EAAQ2C,SAC3BnE,KAAKwF,aAAL,SAAArC,OAA2B3B,EAAQwC,aAAnC,gCAEFhE,KAAK6B,eAiEJ,CACDpD,IAAK,eACL4B,MAAO,SAhEIoF,GACX3G,EAAE,sBAAsBuD,KAAKoD,GAAKpG,OAAO,QAAQoD,MAAM,KAAMvD,QAAQ,UAkEpE,CACDT,IAAK,kBACL4B,MAAO,SAjEOqF,GACd,OAAO5G,EAAE4G,GAASR,QAAQ,wBAmEzB,CACDzG,IAAK,qBACL4B,MAAO,SAlEUqF,GACjB,OAAO1F,KAAK2F,gBAAgBD,GAAS7E,KAAK,aAoEzC,CACDpC,IAAK,oBACL4B,MAAO,SAnESqF,GAA6B,IAApBE,EAAoB9F,UAAA5B,OAAA,QAAA6B,IAAAD,UAAA,IAAAA,UAAA,GACzCiF,EAAO/E,KAAKsF,aAAatF,KAAK6F,mBAAmBH,IACjDvB,EAAW,EACT2B,EAAW9F,KAAK2F,gBAAgBD,GAASX,KAAK,wBAChDe,EAAS5H,SACXiG,GAAY2B,EAAS,GAAGzF,OAE1BL,KAAKuF,gBAAgBR,EAAMa,EAAa,EAAIzB,KA2E3C,CACD1F,IAAK,kBACL4B,MAAO,SA1EO0F,EAAU5B,GACxBnE,KAAKC,YAAc8F,EAAS5B,SAC5BnE,KAAKE,QAAU6F,EAAS3B,MAAQ2B,EAAS5B,SACxB,IAAbA,EACFnE,KAAKgG,QAAQD,EAAStC,aAEtBsC,EAAS5B,SAAWA,EACpBnE,KAAKC,YAAckE,EACnBnE,KAAKE,QAAU6F,EAAS3B,MAAQD,EAChCnE,KAAKiG,YAAYF,IAEnB/F,KAAK6B,eA+EJ,CACDpD,IAAK,UACL4B,MAAO,SA9EDuC,GACN,IAAImC,EAAO/E,KAAKsF,aAAa1C,GAC7B5C,KAAKG,UAAU+F,OAAOlG,KAAKG,UAAUgG,QAAQpB,GAAO,GACnCjG,EAAC,qBAAAqE,OAAsBP,EAAtB,OACPwD,WAiFV,CACD3H,IAAK,YACL4B,MAAO,SAhFCb,GAER,IADAA,EAAIwF,iBACGhF,KAAKG,UAAUjC,QACpB8B,KAAKuF,gBAAgBvF,KAAKG,UAAUH,KAAKG,UAAUjC,OAAS,GAAI,OAsF7DyB,EA7ZT,GA2UM0G,UAuFN,WAtFE,SAAAA,EAAYC,GAAgB5I,gBAAAsC,KAAAqG,GAC1BrG,KAAKsG,eAAiBA,EACtBtG,KAAKI,QAgIP,OA9BA1B,aAAa2H,EAAW,CAAC,CACvB5H,IAAK,QACL4B,MAAO,WA7FF,IAAAkG,EAAAvG,KACLlB,EAAEkB,KAAKsG,gBAAgBvB,KAAK,kBAAkBV,MAAM,SAAA7E,GAAG,OAAI+G,EAAKC,YAAYhH,OAyG3E,CACDf,IAAK,cACL4B,MAAO,SAnGGb,GACVV,EAAE,cAAc2H,YAAY,aAE5B,IAAMC,EAAgB5H,EAAEU,EAAIzB,QAAQmH,QAAQ,kBAEtCyB,EAAiBD,EAAcpF,OAErCxC,EAAEkB,KAAKsG,gBAAgBvB,KAAK,oBAAoB6B,IAAID,EAAe,IAAIE,UAEvEF,EAAeG,YAAY,OAAQ,WAC7BH,EAAeI,GAAG,aACpBL,EAAcxB,QAAQ,MAAMtB,SAAS,mBAqGpCyC,EA5CT,GAlDAvH,EAAEC,UAAUC,MAAM,WAEhBF,EAAEkI,QAAQC,OAAO,WACXnI,EAAErB,QAAMyJ,YAAc,GACxBpI,EAAE,WAAWqI,OAAO,IACa,IAAxBrI,EAAErB,QAAMyJ,YACjBpI,EAAE,WAAWqI,OAAO,KAEpBrI,EAAE,WAAWqI,OAAO,IAAMrI,EAAErB,QAAMyJ,eAKtC,IAAIE,EAAO,IAAIzH,KAAK,qBAGpBb,EAAE,kBAAkBuF,MAAM,SAAA7E,GACxB4H,EAAKC,WAAW7H,KAGlBV,EAAE,mBAAmBuF,MAAM,SAAA7E,GACzB4H,EAAKE,UAAU9H,KAIC,IAAI6G,UAAU,YAEhCvH,EAAE,wBAAwByI,GAAG,QAAS,SAAA/H,GACpCV,EAAE,wCAAwC2H,YAAY,UACtD3H,EAAEU,EAAIzB,QAAQ6F,SAAS","file":"main.es5.js","sourcesContent":["// = ../libs/jquery/dist/jquery.js\r\n// = ../libs/jquery-ui/jquery-ui.js\r\n\r\n$(document).ready(() => {\r\n  //Меню логотипа\r\n  const $logoMenu = $('.main-logo-menu');\r\n  $logoMenu\r\n    .fadeOut()\r\n    .mouseleave(() => $logoMenu.fadeOut());\r\n  $('.header')\r\n    .mousemove(() => $logoMenu.fadeIn());\r\n\r\n//Подменю логотипа\r\n  const $logoSubMenu = $('.logo-menu-list .dropdown-box');\r\n  $logoSubMenu\r\n    .fadeOut()\r\n    .mouseleave(() => $logoSubMenu.fadeOut());\r\n\r\n  $('.logo-menu-list')\r\n    .mouseenter(evt => {\r\n      $(evt.target)\r\n        .siblings('.dropdown-box').fadeIn()\r\n        .mouseleave(() => $logoSubMenu.fadeOut());\r\n    })\r\n    .mouseleave(() => $logoSubMenu.fadeOut());\r\n\r\n//Меню browse\r\n  const $browseMenu = $('.browse .dropdown-box');\r\n  $browseMenu\r\n    .fadeOut()\r\n    .mouseleave(() => {\r\n      $browseMenu.fadeOut()\r\n    });\r\n  $('.browse')\r\n    .mousemove(() => $browseMenu.fadeIn())\r\n    .mouseleave(() => $browseMenu.fadeOut());\r\n});\r\nclass Cart {\r\n  /**\r\n   * Конструктор класса корзины\r\n   * @param {String} source - путь к файлу для загрузки корзины\r\n   * @param {String} container - селектор класса контейнера, содержащего корзину\r\n   */\r\n  constructor(source, container = '.cart__container') {\r\n    this.source = source;\r\n    this.container = container;\r\n    this.countGoods = 0; // Общее кол-во товаров в корзине\r\n    this.amount = 0; // Общая стоимость товаров в корзине\r\n    this.cartItems = []; // Все товары\r\n    this._init();\r\n  }\r\n\r\n  /**\r\n   * Инициализация корзины\r\n   * @private\r\n   */\r\n  _init() {\r\n    this._render();\r\n    this._addEventHandlers();\r\n    fetch(this.source)\r\n      .then(result => result.json())\r\n      .then(data => {\r\n        for (let product of data.contents) {\r\n          this.cartItems.push(product);\r\n          this._renderItem(product);\r\n        }\r\n        this.countGoods = data.countGoods;\r\n        this.amount = data.amount;\r\n        this._renderSum();\r\n      })\r\n  }\r\n\r\n  /**\r\n   * Создает элементы корзины и дополнительных данных\r\n   * @private\r\n   */\r\n  _render() {\r\n    let $cartItemsDiv = $('<div/>', {\r\n      class: 'cart__menu hidden'\r\n    });\r\n    let $totalPrice = $('<div/>', {\r\n      class: 'cart-total'\r\n    });\r\n    $totalPrice.append('<p>TOTAL</p>');\r\n    $totalPrice.append('<p class=\"cart-total-sum\">$0.00</p>');\r\n\r\n    const $cartButtons = $('<div/>', {\r\n      class: 'cart__menu-buttons'\r\n    });\r\n    const $checkoutButton = $('<a/>', {\r\n      href: 'checkout.html',\r\n      class: 'cart__menu-button',\r\n      text: 'Checkout'\r\n    });\r\n    const $cartButton = $('<a/>', {\r\n      href: 'shopping-cart.html',\r\n      class: 'cart__menu-button',\r\n      text: 'Go to cart'\r\n    });\r\n    $cartButtons\r\n      .append($checkoutButton)\r\n      .append($cartButton);\r\n\r\n    $cartItemsDiv\r\n      .append('<div class=\"cart-items-wrap\"></div>')\r\n      .append($totalPrice)\r\n      .append($cartButtons)\r\n      .appendTo($(this.container));\r\n  }\r\n\r\n  /**\r\n   * Добавляет слушатели событий для показа / скрытия состава корзины\r\n   * @private\r\n   */\r\n  _addEventHandlers() {\r\n    const $cartMenu = $('.cart__menu');\r\n    $(this.container)\r\n      .mousemove(() => $cartMenu.fadeIn())\r\n      .mouseleave(() => $cartMenu.delay(500).fadeOut());\r\n\r\n    $cartMenu\r\n      .mousemove(() => $cartMenu.stop())\r\n      .mouseleave(() => {\r\n        $cartMenu.fadeOut()\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Создает элемент контейнера для продукта корзины\r\n   * @param {String} className - имя класса\r\n   * @param {String} id - id товара\r\n   * @returns {jQuery.fn.init|jQuery|HTMLElement} - jquery - элемент корзины\r\n   * @private\r\n   */\r\n  _getMainItemContainer(className, id) {\r\n    return $('<div/>', {\r\n      class: className,\r\n      'data-product': id\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Создает элемент изображения товара в корзине\r\n   * @param {Object} product - объект товара из массива корзины\r\n   * @returns {jQuery.fn.init|jQuery|HTMLElement} - jquery - элемент изображения\r\n   * @private\r\n   */\r\n  _getImageElement(product) {\r\n    return $('<img/>', {\r\n      src: product.img_src,\r\n      alt: product.img_alt,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Создает элемент рейтинга товара\r\n   * @returns {jQuery.fn.init|jQuery|HTMLElement} - jquery - элемент рейтинга\r\n   * @private\r\n   */\r\n  _getProductRatingElement() {\r\n    const $productRating = $('<div class=\"product-rating\"></div>');\r\n    for (let i = 0; i < 5; i++) {\r\n      $productRating.append('<i class=\"fas fa-star rating-star\"></i>');\r\n    }\r\n    return $productRating;\r\n  }\r\n\r\n  /**\r\n   * создает элемент div с заданным классом и содержимым\r\n   * @param {String} className - имя класса\r\n   * @param {String} text - содержание элемента\r\n   * @returns {jQuery.fn.init|jQuery|HTMLElement} - jquery - элемент div\r\n   * @private\r\n   */\r\n  _getDivElement(className, text = '') {\r\n    return $(`<div class=\"${className}\">${text}</div>`);\r\n  }\r\n\r\n  /**\r\n   * создает элемент <p> с заданным классом и содержимым\r\n   * @param {String} className - имя класса\r\n   * @param {String} text - содержание элемента\r\n   * @returns {jQuery.fn.init|jQuery|HTMLElement} - jquery - элемент p\r\n   * @private\r\n   */\r\n  _getParagraphElement(className, text) {\r\n    return $(`<p class=\"${className}\">${text}</p>`);\r\n  }\r\n\r\n  _getSpanElement(className, text) {\r\n    return $(`<span class=\"${className}\">${text}</span>`);\r\n  }\r\n\r\n  _renderItem(product) {\r\n    this._renderItemMenuCart(product);\r\n    this._renderItemPageCart(product);\r\n  }\r\n\r\n  /**\r\n   * Выводит в корзину меню продукт\r\n   * @param {Object} product - продукт из массива корзины\r\n   * @private\r\n   */\r\n  _renderItemMenuCart(product) {\r\n    const $container = this._getMainItemContainer('cart__card cart-item-wrapper', product.id_product);\r\n\r\n    const $img = this._getImageElement(product);\r\n    $img.addClass('photo-product');\r\n\r\n    const $productInfo = this._getDivElement(\"product-info\");\r\n    $productInfo\r\n      .append(this._getParagraphElement(\"product-name for-cart-menu\", product.product_name))\r\n      .append(this._getProductRatingElement().addClass('for-cart-menu'))\r\n      .append(this._getDivElement(\"cart__product-total\")\r\n        .append(this._getSpanElement(\"product-quantity\", product.quantity))\r\n        .append(`<span> x </span>`)\r\n        .append(this._getSpanElement(\"product-price\", `&#36;${product.price}`)));\r\n\r\n    $container\r\n      .append($img)\r\n      .append($productInfo)\r\n      .append(this._getDivElement(\"fas fa-times-circle delete-product\")\r\n        .click(evt => this._onChangeQuantity(evt.target, true)))\r\n      .appendTo($('.cart-items-wrap'));\r\n  }\r\n\r\n  /**\r\n   * Выводит на странице корзины продукт\r\n   * @param {Object} product - продукт из массива корзины\r\n   * @private\r\n   */\r\n  _renderItemPageCart(product) {\r\n    const $container = this._getMainItemContainer('cart-table-row cart-item-wrapper', product.id_product);\r\n\r\n    const $productDetails = this._getDivElement('product-details cart-table-cell');\r\n    const $img = this._getImageElement(product);\r\n\r\n    const $productDescription = this._getDivElement('product-details-description');\r\n    $productDescription\r\n      .append(this._getParagraphElement(\"product-name\", product.product_name))\r\n      .append(this._getProductRatingElement())\r\n      .append(this._getParagraphElement(\"product-details-properties\", \"Color: \")\r\n        .append(this._getSpanElement(\"product-details-value\", product.color)))\r\n      .append(this._getParagraphElement(\"product-details-properties\", \"Size: \")\r\n        .append(this._getSpanElement(\"product-details-value\", product.size)));\r\n\r\n    $productDetails\r\n      .append($img)\r\n      .append($productDescription);\r\n\r\n    $container\r\n      .append($productDetails)\r\n      .append(this._getDivElement('cart-table-cell', `&#36;${product.price}`))\r\n      .append(this._getDivElement('cart-table-cell')\r\n        .append($('<input class=\"cart-table-quantity\" value=\"2\" type=\"number\" name=\"quantity\">')\r\n          .val(product.quantity)\r\n          .change(evt => this._onChangeQuantity(evt.target))))\r\n      .append(this._getDivElement('cart-table-cell', product.shipping))\r\n      .append(this._getDivElement('cart-table-cell  product-price', `&#36;${product.quantity * product.price}`))\r\n      .append(this._getDivElement('cart-table-cell')\r\n        .append(this._getDivElement(\"fas fa-times-circle cart-table-close-icon delete-product\"))\r\n        .click(evt => this._onChangeQuantity(evt.target, true)))\r\n      .appendTo($('.cart-table'));\r\n  }\r\n\r\n  /**\r\n   * Обновляет общие суммы\r\n   * @private\r\n   */\r\n  _renderSum() {\r\n    $('.cart__quantity').text(this.countGoods);\r\n    $('.cart-total-sum').text(`$${this.amount}`);\r\n  }\r\n\r\n  /**\r\n   * Обновляет инормацию по товару\r\n   * @param {Object} product - продукт из массива корзины\r\n   * @private\r\n   */\r\n  _updateCart(product) {\r\n    let $container = $(`div[data-product=\"${product.id_product}\"]`);\r\n    $container.find('.product-quantity').text(product.quantity);\r\n    $container.find('.product-price').text(`$${product.quantity * product.price}`);\r\n  }\r\n\r\n  _getCartItem(id) {\r\n    return this.cartItems.find(product => product.id_product === id);\r\n  }\r\n\r\n  /**\r\n   * Добавляет товар в корзину\r\n   * @param {Event} evt - событие нажатия на кнопку добавления товара\r\n   */\r\n  addProduct(evt) {\r\n    evt.preventDefault();\r\n    const $productContainer = $(evt.target).closest('[data-id]');\r\n    const $img = $productContainer.find('img')[0];\r\n    const $inputQuantity = $productContainer.find('#quantity')[0];\r\n    let addQuantity = 1;\r\n    if ($inputQuantity) {\r\n      addQuantity = +$inputQuantity.value;\r\n      $inputQuantity.value = 1;\r\n    }\r\n    let productId = +$productContainer.data('id');\r\n    let find = this._getCartItem(productId);\r\n    if (find) {\r\n      this._changeQuantity(find, find.quantity + addQuantity);\r\n      this._showMessage(`Количество товара ${find.product_name} увеличено`);\r\n    } else {\r\n      let product = {\r\n        id_product: productId,\r\n        product_name: $productContainer.data('name'),\r\n        price: $productContainer.data('price'),\r\n        quantity: addQuantity,\r\n        img_src: $img.src,\r\n        img_alt: $img.alt,\r\n        color: $productContainer.data('color'),\r\n        size: $productContainer.data('size')\r\n      };\r\n      this.cartItems.push(product);\r\n      this._renderItem(product);\r\n      this.amount += product.price;\r\n      this.countGoods += product.quantity;\r\n      this._showMessage(`Товар ${product.product_name} успешно добавлен в корзину`);\r\n    }\r\n    this._renderSum();\r\n  }\r\n\r\n  _showMessage(msg) {\r\n    $('.cart__add-message').text(msg).fadeIn('slow').delay(3000).fadeOut('slow');\r\n  }\r\n\r\n  _getItemWrapper(element) {\r\n    return $(element).closest('.cart-item-wrapper');\r\n  }\r\n\r\n  _getEventProductId(element) {\r\n    return this._getItemWrapper(element).data('product');\r\n  }\r\n\r\n  _onChangeQuantity(element, deleteItem = false) {\r\n    let find = this._getCartItem(this._getEventProductId(element));\r\n    let quantity = 0;\r\n    const $inputEl = this._getItemWrapper(element).find('.cart-table-quantity');\r\n    if ($inputEl.length) {\r\n      quantity = +$inputEl[0].value;\r\n    }\r\n    this._changeQuantity(find, deleteItem ? 0 : quantity);\r\n  }\r\n\r\n  _changeQuantity(cartItem, quantity) {\r\n    this.countGoods -= cartItem.quantity;\r\n    this.amount -= cartItem.price * cartItem.quantity;\r\n    if (quantity === 0) {\r\n      this._remove(cartItem.id_product)\r\n    } else {\r\n      cartItem.quantity = quantity;\r\n      this.countGoods += quantity;\r\n      this.amount += cartItem.price * quantity;\r\n      this._updateCart(cartItem);\r\n    }\r\n    this._renderSum();\r\n  }\r\n\r\n  _remove(id) {\r\n    let find = this._getCartItem(id);\r\n    this.cartItems.splice(this.cartItems.indexOf(find), 1);\r\n    let $container = $(`div[data-product=\"${id}\"]`);\r\n    $container.remove();\r\n  }\r\n\r\n  clearCart(evt) {\r\n    evt.preventDefault();\r\n    while (this.cartItems.length) {\r\n      this._changeQuantity(this.cartItems[this.cartItems.length - 1], 0);\r\n    }\r\n  }\r\n}\r\nclass Accordion {\r\n  constructor(containerClass) {\r\n    this.containerClass = containerClass;\r\n    this._init();\r\n  }\r\n\r\n  /**\r\n   * Инициализация - добавляем слушатель событий\r\n   * @private\r\n   */\r\n  _init(){\r\n    $(this.containerClass).find('.sidebar-title').click(evt => this._toggleMenu(evt));\r\n  }\r\n\r\n  /**\r\n   * Открытие / скрытие меню\r\n   * @param {Event} evt событие нажатия на заголовок меню\r\n   * @private\r\n   */\r\n  _toggleMenu(evt) {\r\n    $('.menu-open').removeClass('menu-open');\r\n\r\n    const $currentTitle = $(evt.target).closest('.sidebar-title');\r\n\r\n    const $currentElOpen = $currentTitle.next();\r\n\r\n    $(this.containerClass).find('.sidebar-submenu').not($currentElOpen[0]).slideUp();\r\n\r\n    $currentElOpen.slideToggle('fast', () => {\r\n      if ($currentElOpen.is(':visible')) {\r\n        $currentTitle.closest('li').addClass('menu-open');\r\n      }\r\n    });\r\n\r\n  }\r\n}\r\n\r\n$(document).ready(() => {\r\n\r\n  $(window).scroll(() => {\r\n    if ($(this).scrollTop() > 40) {\r\n      $('.header').height(60);\r\n    } else if ($(this).scrollTop() === 0) {\r\n      $('.header').height(100);\r\n    } else {\r\n      $('.header').height(100 - $(this).scrollTop());\r\n    }\r\n  });\r\n\r\n  // Корзина\r\n  let cart = new Cart('json/getCart.json');\r\n\r\n  // Добавление товара\r\n  $('.add-cart-wrap').click(evt => {\r\n    cart.addProduct(evt);\r\n  });\r\n  // Очистка корзины\r\n  $('.clear-cart-btn').click(evt => {\r\n    cart.clearCart(evt);\r\n  });\r\n\r\n  //sidebar\r\n  const accordion = new Accordion('.sidebar');\r\n\r\n  $(\".slider-control-wrap\").on(\"click\", evt => {\r\n    $(\".slider-control-wrap .slider-control\").removeClass(\"active\");\r\n    $(evt.target).addClass(\"active\");\r\n  });\r\n\r\n});"]}